define("muv.controller",[],function(){"use strict";var t=function(t,e,n,r){this.name=t||"",this.module=e,this.$controller=n,this.ctor=r||function(){}};return t}),define("muv.module",["./muv.controller"],function(t){"use strict";var e=function(e,n,r,i){var o={};this.name=e||"",this.controller=function(e,n){return o[e]=new t(e,this,void 0,n),o[e]},this.controllers={get:function(t){return o[t]},remove:function(t){return delete controller[t],this}},this.$module=r,this.globals=i||{},this.app=n,this.getPath=function(t,e){return t===n.pathTypes.src?{path:n.src+e+".html"}:t===n.pathTypes.templates?{path:n.templates+e+".html"}:void 0},this.src=function(t){return this.getPath(n.pathTypes.src,t)},this.template=function(t){return this.getPath(n.pathTypes.templates,t)}};return e}),define("muv.common",[],function(){"use strict";var t={app:"muv-app",module:"muv-module",controller:"muv-controller",view:"muv-view",control:"muv-control",model:"muv-model",mask:"muv-mask",src:"muv-src",rpt:"muv-repeat",page:"muv-page"},e={app:"[$app]".replace("$app",t.app),module:"[$module]".replace("$module",t.module),controller:"[$controller]".replace("$controller",t.controller),view:"[$view]".replace("$view",t.view),control:"[$control]".replace("$control",t.control),model:"[$model]".replace("$model",t.model),mask:"[$mask]".replace("$mask",t.mask),src:"[$src]".replace("$src",t.src),rpt:"[$rpt]".replace("$rpt",t.rpt),page:"[$page]".replace("$page",t.page)},n={},r={src:1,templates:2},i={getOuterHtml:function(t){var e=t,n=e.wrap("<div />"),r=n.parent().html();return e.unwrap("<div />"),r},cleanPath:function(t){var e=/[a-z]+:\/\//gim,n=/\/\//gim,r=t.split(e),i="",o="";return r.length>1?(i=r[0],o=r[1],o=o.replace(n,"/")):(i=r[0],i=i.replace(n,"/")),i+o}};return{attrs:t,selectors:e,regex:n,utils:i,pathTypes:r}}),define("muv.app",["./muv.module","./muv.common"],function(t,e){"use strict";var n=function(n,r,i){this.name=n||"";var o={};this.module=function(e,n){return o[e]=new t(e,this,n),o[e]},this.modules={get:function(t){return o[t]},remove:function(t){return delete o[t],this}},this.init=function(t){r.init(t)},this.pageInit=function(t){r.pageInit(t)},this.$app=i,this.src="",this.templates="",this.muvPath="",this.pathTypes=e.pathTypes};return n}),define("muv.ajax",[],function(){"use strict";return{get:function(t){return $.ajax({type:"GET",url:t,cache:!1,async:!0})}}}),define("muv.externalmodules.init",["./muv.common","./muv.ajax"],function(t,e){"use strict";return function(n,r){var i=t.selectors,o=t.attrs,u=t.utils;c=n.find(i.src);var c,a,s;return function l(t,m){c.length>0&&t<c.length?(a=c.eq(t),s=u.cleanPath("$base$modulePath.html".replace("$base",r.src).replace("$modulePath",a.attr(o.src))),e.get(s).then(function(e){a.children().remove(),a.append(e).removeAttr(o.src),setTimeout(function(){l(t+1,m)},0)})):t>=c.length&&c.length>0?setTimeout(function(){c=n.find(i.src),l(0,m)},0):m()}}}),define("muv.view",[],function(){"use strict";var t=function(t,e,n){this.name=t||"",this.controller=e,this.$view=n,this.destroy=function(){this.$view.remove()},this.controls={add:function(t){return t&&t.muv&&(this[t.muv.name]=t),this},get:function(t){return this[t]},remove:function(t){return delete this[t],this}}};return t}),define("muv.databinding",["./muv.common"],function(common){"use strict";var selectors=common.selectors,attrs=common.attrs,dataMuvExtensions={getMarkup:function(t,e){var n=$(t);return e&&e.length&&e.splice?e.forEach(function(t){var e=t.split("|").map(function(t){return t.trim()}),r=e[0],i=e[1];n.attr(r,i)}):e&&n.attr(e),n.wrap("<div />").parent().html()}};return{bindTemplate:function(template,data){for(var bindingRegex=/((<muvCode>[\s]+[\w\d.=;?:,()"'\s\/$|\\!\[\]<>\{\}+#]+[\s]+<\/muvCode>)|(\{\{[\s]+[\w\d.=;?:,()"'\s\/$|\\!\[\]<>+#]+[\s]+\}\}))/gim,brackets=/((^{\{|\}\}$)|(^<muvCode>|<\/muvCode>$))/gim,fnCall=/^[\w\d_]+\(/gim,allowed=/for|while|do/gim,rpt="",matches=template.match(bindingRegex),tmpl=template,$tmpl=$(tmpl),inner=$tmpl.find(selectors.rpt).length>0?common.utils.getOuterHtml($tmpl.find(selectors.rpt)):tmpl,$output,placeholder,stripped,trimmed,fns,value,replaceable,m=0;m<matches.length;m++)placeholder=matches[m],stripped=placeholder.replace(brackets,""),trimmed=stripped.trim(),fns=trimmed.match(fnCall),value="",(allowed.test(trimmed)||null===fns)&&(data.muv=dataMuvExtensions,value=function(){return eval(trimmed)}.call(data)),inner=inner.replace(placeholder,value);return $output=$(inner).removeAttr(attrs.rpt)[0],replaceable=$tmpl.find(selectors.rpt),replaceable.replaceWith($output),$output=replaceable.length>0?$tmpl:$output}}}),define("muv.control.repeat",["./muv.databinding","./muv.ajax","./muv.common"],function(t,e,n){"use strict";n.attrs,n.selectors;return function(n,r,i){return function(r,o,u){var c,a,s,l,m,p,v=[],f=function(t){var e=t.map(function(t){return $("<div />").append($(t).clone()).html()}).join("");h.clear===!0&&i.children().remove(),i.append(l?l.append(e):e)},h=$.extend({clear:!0},u);return r&&r.length&&(c=function(t){for(var e=0;e<r.length;e++)t(r[e])},a=t.bindTemplate,"string"==typeof o?(s=o,l="",m=$(s),1===m.find(n.rpt).length&&(s=m.find(n.rpt).eq(0).html(),m.find(n.rpt).remove(),l=m),c(function(t){p=a(s,t),v.push(p)}),f(v)):"object"==typeof o&&e.get(o.path).then(function(t){s=t,l="",m=$(s),1===m.find(n.rpt).length&&(s=m.find(n.rpt).eq(0).html(),m.find(n.rpt).remove(),l=m),c(function(t){p=a(s,t),v.push(p)}),f(v)})),this}}}),define("muv.control.extensions",["./muv.control.repeat","./muv.common","./muv.ajax","./muv.context.init"],function(t,e,n,r){"use strict";var i=e.attrs,o=e.selectors;return function(r){r.muv.bind=function(t){return t&&(r.val(t[r.attr(i.control)]),r.on("keyup keydown change",function(){t[$(this).attr(i.control)]=$(this).val()||$(this).text()})),this},r.muv.watch=function(t){return"function"==typeof t&&r.on("keyup keydown change",function(){t.call($(this))}),this},r.muv.src=function(t){return{path:t}},r.muv.on=function(t,e){return r.on(t,e),this},r.muv.jq=r,r.muv.load=function(t,e){var i=r.muv.view.controller.module.app,o=i.muvPath;require([o.concat("muv.context.init"),o.concat("muv.externalmodules.init")],function(o,u){n.get(t.path).then(function(t){r.children().remove(),r.append(t);var n=u(r,i);n(0,function(){o(r,r.muv.view.controller.module.app,{},e)})})})},r.muv.outerHtml=function(t){return e.utils.getOuterHtml(t)},r.muv.repeat=t(o,i,r)}}),define("muv.control",["./muv.common","./muv.control.extensions"],function(t,e,n){"use strict";var r=(t.attrs,t.selectors,function(t,n,r){return n.muv=n.muv||{},n.muv.name=t,n.muv.view=r,e(n,$),n});return r}),define("muv.model",[],function(){"use strict";var t=function(t){"object"==typeof t&&Object.keys(t).forEach(function(e){this[e]=t[e]}.bind(this))};return t}),define("muv.view.init",["./muv.common","./muv.view","./muv.control","./muv.model"],function(t,e,n,r){"use strict";var i=t.selectors,o=t.attrs;return function(t,u,c,a,s,l,m,p){var v;v=t?t.find(i.view):a.find(i.view);var f,h,d,g,w,y,x,b,k,T,P;v.each(function(t){f=$(this),h=f.find(i.control),d=new e(f.attr(o.view),u,f),g={},w=f.find(i.model),w.each(function(t){y=$(this),g[y.attr(o.control)]=""}),h.each(function(t){x=$(this),b=x.attr(o.control),k=new n(b,x,d),d.controls.add(k)}),T=new r(g),P="function"==typeof p?p(d,T,c,m):new u.ctor(d,T,c,m)})}}),define("muv.controller.init",["./muv.common","./muv.view.init"],function(t,e){"use strict";var n=t.selectors,r=t.attrs;return function(t,i,o,u,c,a){var s,l,m=t.find(n.controller);m.length>0?m.each(function(n){s=$(this),a||(l=i.controllers.get(s.attr(r.controller)),l.$controller=s),e(s,l,i,t,o,u,c,a)}):e(s,l,i,t,o,u,c,a)}}),define("muv.routing",[],function(){"use strict";function t(t){var e="";return t&&t.length&&t.length>0&&(e+="/:",e+=t.map(function(t){return t.key.concat("=").concat(t.value)}).reduce(function(t,e){return t.concat("&").concat(e)})),e}function e(t){return t.replace(/[#]+/g,"")}function n(t){var e=/(#\/[\w\d\/&=:]+)/gi;return e.test(t)}function r(t){return(t.split("#")[1]||"").indexOf(":")>-1}var i=window.location;return{hasRoute:function(t){var e=t||i.href;return n(e)},setRoute:function(r,o){var u=i.href;o&&(r+=t(o)),n(i.href)&&(u=i.href.split("#")[0]),i.href=e(u).concat("#").concat(r)},getRoute:function(t){var e=t||i.href,n=e.split("#")[1]||"",r=n.split(":")[0]||"",o=/\/$/gim;return r.match(o)&&(r=r.replace(o,"")),r},getParams:function(t){var e=/[a-z]+:\/\//gim,n=t||i.href;e.test(n)&&(n=n.replace(i.protocol.concat("//").concat(i.host).concat("/"),""));var o=[],u="";return r(n)&&(u=n.split(":")[1],o=u.split("&"),o=o.map(function(t){var e=t.split("=");return{key:e[0]||"",value:e[1]||""}})),o},initBackButtonHandler:function(t){var e=this;window.onhashchange||(window.onhashchange=function(){e.hasRoute()&&t()})}}}),define("muv.page",["./muv.common","./muv.routing"],function(t,e){"use strict";var n=(t.selectors,t.attrs,function(t,n,r){this.app=t,this.route=function(t,n){e.setRoute(t,n)},this.$page=n,this.args=r||[]});return n}),define("muv.module.init",["./muv.controller.init","./muv.common","./muv.page","./muv.routing"],function(t,e,n,r){"use strict";var i=e.selectors,o=e.attrs;return function(e,u,c,a){var s,l,m,p,v,f,h;l=e.find(i.module),0===l.length&&(f=e.find(i.view),f.each(function(t){h=$(this),h.wrap("<div />").parent().attr(o.module,h.attr(o.view).concat("$partial"))}),l=e.find(i.module)),m=e.find(i.page).eq(0),m&&m.length>0&&(s=new n(u,m,c),r.hasRoute()||r.setRoute(m.attr(o.page),c)),l.each(function(e){p=$(this),v=u.modules.get(p.attr(o.module)),v&&(v.$module=p),t(p,v,u,c,s,a)})}}),define("muv.context.init",["./muv.module.init"],function(t){"use strict";return function(e,n,r,i){t(e,n,r,i)}}),define("muv.syncmodules.init",["./muv.context.init"],function(t){"use strict";return function(e,n,r){return function(){t(e,n,r)}}}),define("muv.init",["./muv.externalmodules.init","./muv.syncmodules.init"],function(t,e){"use strict";return function(n,r,i){var o=t(n,r),u=e(n,r,i),c=0;o(c,u)}}),define("muv.singlepage.init",["./muv.routing","./muv.common"],function(t,e){"use strict";var n=(e.selectors,e.attrs);return function(e,r){var i=t.getRoute(),o=t.getParams();i&&o&&(r.attr(n.src,i),e.pageInit(o))}}),define("muv.core",["./muv.app","./muv.common","./muv.init","./muv.singlepage.init","./muv.routing"],function(t,e,n,r,i){"use strict";var o=e.selectors,u=e.attrs,c=(e.regex,{init:function(t,e){var i,c,s=$(o.app);return s.each(function(s){if(i=$(this),c=a[i.attr(u.app)],n(i,c,t),!e){var l=$(o.page);l.length>0&&r(c,l)}}),$(o.mask).removeAttr(u.mask),this},pageInit:function(t){return this.init(t,!0),this}}),a={},s={preinit:function(t){return t.call(this),this},init:function(t){require(t,function(){c.init()})},app:function(e){var n=a[e]||new t(e,c);return{onInit:function(t){return"function"==typeof t&&t.call(n,n),this},cache:function(){return a[n.name]=n,this},ready:function(){if(a[n.name]===n)return i.initBackButtonHandler(function(){c.init()}),a[n.name];throw new Error('You did not add this application context to the muv appCache. You must call the ".cache()" method before calling ".ready()"')}}}};return s});