define("muv.controller",[],function(){"use strict";function t(t,e,n,r){this.name=t||"",this.module=e,this.$controller=n,this.ctor=r||function(){}}return t}),define("muv.module",["./muv.controller"],function(t){"use strict";function e(e,n,r,i){var o={};this.name=e||"",this.controller=function(e,n){return o[e]=new t(e,this,void 0,n),o[e]},this.controllers={get:function(t){return o[t]},remove:function(t){return delete controller[t],this}},this.$module=r,this.globals=i||{},this.app=n,this.getPath=function(t,e){return t===n.pathTypes.src?{path:n.src+e+".html"}:t===n.pathTypes.templates?{path:n.templates+e+".html"}:void 0},this.src=function(t){return this.getPath(n.pathTypes.src,t)},this.template=function(t){return this.getPath(n.pathTypes.templates,t)}}return e}),define("muv.common",[],function(){"use strict";var t={app:"muv-app",module:"muv-module",controller:"muv-controller",view:"muv-view",control:"muv-control",model:"muv-model",mask:"muv-mask",src:"muv-src",rpt:"muv-repeat",page:"muv-page"},e={app:"[$app]".replace("$app",t.app),module:"[$module]".replace("$module",t.module),controller:"[$controller]".replace("$controller",t.controller),view:"[$view]".replace("$view",t.view),control:"[$control]".replace("$control",t.control),model:"[$model]".replace("$model",t.model),mask:"[$mask]".replace("$mask",t.mask),src:"[$src]".replace("$src",t.src),rpt:"[$rpt]".replace("$rpt",t.rpt),page:"[$page]".replace("$page",t.page)},n={},r={src:1,templates:2},i={getOuterHtml:function(t){var e=t,n=e.wrap("<div />"),r=n.parent().html();return e.unwrap("<div />"),r},cleanPath:function(t){var e=/[a-z]+:\/\//gim,n=/\/\//gim,r=t.split(e),i="",o="";return r.length>1?(i=r[0],o=r[1],o=o.replace(n,"/")):(i=r[0],i=i.replace(n,"/")),i+o}};return Object.defineProperty(i,"emptyString",{writable:!1,value:""}),{attrs:t,selectors:e,regex:n,utils:i,pathTypes:r}}),define("muv.app",["./muv.module","./muv.common"],function(t,e){"use strict";function n(e,n,r){var i={};this.name=e||"",this.module=function(e,n){return i[e]=new t(e,this,n),i[e]},this.modules={get:function(t){return i[t]},remove:function(t){return delete i[t],this}},this.init=function(t,e){return n.init(t,e),this},this.pageInit=function(t){return n.pageInit(t),this},this.$app=r}var r=e.utils.emptyString;return n.prototype.pathTypes=e.pathTypes,n.prototype.muvPath=r,n.prototype.templates=r,n.prototype.src=r,n}),define("muv.ajax",[],function(){"use strict";return{get:function(t){return $.ajax({type:"GET",url:t,cache:!1,async:!0})},post:function(t,e){return $.ajax({type:"POST",url:t,cache:!1,async:!0,data:e,contentType:"application/json; charset=utf-8",dataType:"json"})}}}),define("muv.externalmodules.init",["./muv.common","./muv.ajax"],function(t,e){"use strict";return function n(r,i,o){function u(t,o){function u(s){c=p.eq(s),a=m.cleanPath("$base$modulePath.html".replace("$base",i.src).replace("$modulePath",c.attr(l.src))),e.get(a).done(function(e){c.html(""),c.append(e).removeAttr(l.src),s+1<p.length?u(s+1):n(r,i)(t,o)})}p.length>0?u(0):t(o)}var c,a,s=t.selectors,l=t.attrs,m=t.utils,p=o?r.find(s.page):r.find(s.src);return u}}),define("muv.view",[],function(){"use strict";var t=function(t,e,n){this.name=t||"",this.controller=e,this.$view=n,this.destroy=function(){this.$view.remove()},this.controls={add:function(t){return t&&t.muv&&(this[t.muv.name]=t),this},get:function(t){return this[t]},remove:function(t){return delete this[t],this}}};return t}),define("muv.databinding",["./muv.common"],function(common){"use strict";var selectors=common.selectors,attrs=common.attrs,dataMuvExtensions={getMarkup:function(t,e){var n=$(t);return e&&e.length&&e.splice?e.forEach(function(t){var e=t.split("|").map(function(t){return t.trim()}),r=e[0],i=e[1];n.attr(r,i)}):e&&n.attr(e),n.wrap("<div />").parent().html()}};return{bindTemplate:function(template,data){for(var bindingRegex=/((<muvCode>[\s]+[\w\d.=;?:,()"'\s\/$|\\!\[\]<>\{\}+#]+[\s]+<\/muvCode>)|(\{\{[\s]+[\w\d.=;?:,()"'\s\/$|\\!\[\]<>+#]+[\s]+\}\}))/gim,brackets=/((^{\{|\}\}$)|(^<muvCode>|<\/muvCode>$))/gim,fnCall=/^[\w\d_]+\(/gim,allowed=/for|while|do/gim,rpt="",matches=template.match(bindingRegex),tmpl=template,$tmpl=$(tmpl),inner=$tmpl.find(selectors.rpt).length>0?common.utils.getOuterHtml($tmpl.find(selectors.rpt)):tmpl,$output,placeholder,stripped,trimmed,fns,value,replaceable,m=0;m<matches.length;m++)placeholder=matches[m],stripped=placeholder.replace(brackets,""),trimmed=stripped.trim(),fns=trimmed.match(fnCall),value="",(allowed.test(trimmed)||null===fns)&&(data.muv=dataMuvExtensions,value=function(){return eval(trimmed)}.call(data)),inner=inner.replace(placeholder,value);return $output=$(inner).removeAttr(attrs.rpt)[0],replaceable=$tmpl.find(selectors.rpt),replaceable.replaceWith($output),$output=replaceable.length>0?$tmpl:$output}}}),define("muv.control.repeat",["./muv.databinding","./muv.ajax","./muv.common"],function(t,e,n){"use strict";n.attrs,n.selectors;return function(n,r,i){return function(r,o,u){var c,a,s,l,m,p,f=[],v=function(t){var e=t.map(function(t){return $("<div />").append($(t).clone()).html()}).join("");h.clear===!0&&i.children().remove(),i.append(l?l.append(e):e)},h=$.extend({clear:!0},u);return r&&r.length&&(c=function(t){for(var e=0;e<r.length;e++)t(r[e])},a=t.bindTemplate,"string"==typeof o?(s=o,l="",m=$(s),1===m.find(n.rpt).length&&(s=m.find(n.rpt).eq(0).html(),m.find(n.rpt).remove(),l=m),c(function(t){p=a(s,t),f.push(p)}),v(f)):"object"==typeof o&&e.get(o.path).then(function(t){s=t,l="",m=$(s),1===m.find(n.rpt).length&&(s=m.find(n.rpt).eq(0).html(),m.find(n.rpt).remove(),l=m),c(function(t){p=a(s,t),f.push(p)}),v(f)})),this}}}),define("muv.control.extensions",["./muv.control.repeat","./muv.common","./muv.ajax","./muv.context.init"],function(t,e,n,r){"use strict";var i=e.attrs,o=e.selectors;return function(r){r.muv.bind=function(t){return t&&(r.val(t[r.attr(i.control)]),r.on("keyup keydown change",function(){t[$(this).attr(i.control)]=$(this).val()||$(this).text()})),this},r.muv.watch=function(t){return"function"==typeof t&&r.on("keyup keydown change",function(){t.call($(this))}),this},r.muv.src=function(t){return{path:t}},r.muv.on=function(t,e){return r.on(t,e),this},r.muv.jq=r,r.muv.load=function(t,e){var i=r.muv.view.controller.module.app,o=i.muvPath;require([o.concat("muv.context.init"),o.concat("muv.externalmodules.init")],function(o,u){n.get(t.path).then(function(t){r.children().remove(),r.append(t);var n=u(r,i);n(0,function(){o(r,r.muv.view.controller.module.app,{},e)})})})},r.muv.outerHtml=function(t){return e.utils.getOuterHtml(t)},r.muv.repeat=t(o,i,r)}}),define("muv.control",["./muv.common","./muv.control.extensions"],function(t,e,n){"use strict";function r(t,n,r){return n.muv=n.muv||{},n.muv.name=t,n.muv.view=r,e(n,$),n}t.attrs,t.selectors;return r}),define("muv.model",[],function(){"use strict";function t(t){"object"==typeof t&&Object.keys(t).forEach(function(e){this[e]=t[e]}.bind(this))}return t}),define("muv.view.init",["./muv.common","./muv.view","./muv.control","./muv.model"],function(t,e,n,r){"use strict";var i=t.selectors,o=t.attrs;return function(t,u,c,a,s,l,m,p){var f;f=t?t.find(i.view):a.find(i.view);var v,h,d,g,w,y,x,b,k,j,P;f.each(function(t){v=$(this),h=v.find(i.control),d=new e(v.attr(o.view),u,v),g={},w=v.find(i.model),w.each(function(t){y=$(this),g[y.attr(o.control)]=""}),h.each(function(t){x=$(this),b=x.attr(o.control),k=new n(b,x,d),d.controls.add(k)}),j=new r(g),u&&(P=new u.ctor(d,j,c,m))})}}),define("muv.controller.init",["./muv.common","./muv.view.init"],function(t,e){"use strict";var n=t.selectors,r=t.attrs;return function(t,i,o,u,c,a){var s,l,m=t.find(n.controller);m.length>0?m.each(function(n){s=$(this),a||(l=i.controllers.get(s.attr(r.controller)),l.$controller=s),e(s,l,i,t,o,u,c,a)}):e(s,l,i,t,o,u,c,a)}}),define("muv.routing",[],function(){"use strict";function t(t){var e="";return t&&t.length&&t.length>0&&(e+="/:",e+=t.map(function(t){return t.key.concat("=").concat(t.value)}).reduce(function(t,e){return t.concat("&").concat(e)})),e}function e(t){return t.replace(/[#]+/g,"")}function n(t){var e=/(#\/[\w\d\/&=:]+)/gi;return e.test(t)}function r(t){return(t.split("#")[1]||"").indexOf(":")>-1}var i=window.location;return{hasRoute:function(t){var e=t||i.href;return n(e)},setRoute:function(r,o){var u=i.href;o&&(r+=t(o)),n(i.href)&&(u=i.href.split("#")[0]),i.href=e(u).concat("#").concat(r)},getRoute:function(t){var e=t||i.href,n=e.split("#")[1]||"",r=n.split(":")[0]||"",o=/\/$/gim;return r.match(o)&&(r=r.replace(o,"")),r},getParams:function(t){var e=/[a-z]+:\/\//gim,n=t||i.href;e.test(n)&&(n=n.replace(i.protocol.concat("//").concat(i.host).concat("/"),""));var o=[],u="";return r(n)&&(u=n.split(":")[1],o=u.split("&"),o=o.map(function(t){var e=t.split("=");return{key:e[0]||"",value:e[1]||""}})),o},initBackButtonHandler:function(t){var e=this;window.onhashchange||(window.onhashchange=function(){e.hasRoute()&&t()})}}}),define("muv.page",["./muv.common","./muv.routing"],function(t,e){"use strict";function n(t,n,r){this.app=t,this.route=function(t,n){e.setRoute(t,n)},this.$page=n,this.args=r||[]}t.selectors,t.attrs;return n}),define("muv.module.init",["./muv.controller.init","./muv.common","./muv.page","./muv.routing"],function(t,e,n,r){"use strict";var i=e.selectors,o=e.attrs;return function(e,u,c,a){var s,l,m,p,f,v,h;l=e.find(i.module),0===l.length&&(v=e.find(i.view),v.each(function(t){h=$(this),h.wrap("<div />").parent().attr(o.module,h.attr(o.view).concat("$partial"))}),l=e.find(i.module)),m=e.find(i.page).eq(0),m&&m.length>0&&(s=new n(u,m,c),r.hasRoute()||r.setRoute(m.attr(o.page),c)),l.each(function(e){p=$(this),f=u.modules.get(p.attr(o.module)),f&&(f.$module=p),t(p,f,u,c,s,a)}),"function"==typeof a&&a(u,e,c)}}),define("muv.context.init",["./muv.module.init"],function(t){"use strict";return function(e,n,r,i){t(e,n,r,i)}}),define("muv.syncmodules.init",["./muv.context.init"],function(t){"use strict";return function(e,n,r){return function(i){t(e,n,r,i)}}}),define("muv.init",["./muv.externalmodules.init","./muv.syncmodules.init"],function(t,e){"use strict";return function(n,r,i,o,u,c){var a=t(n,r,o),s=e(n,r,i,c);u?a(function(){},c):a(s,c)}}),define("muv.singlepage.init",["./muv.routing","./muv.common"],function(t,e){"use strict";var n=(e.selectors,e.attrs);return function(e,r){var i=t.getRoute(),o=t.getParams();i&&o&&(r.attr(n.src,i),e.pageInit(o))}}),define("muv.core",["./muv.app","./muv.common","./muv.init","./muv.singlepage.init","./muv.routing"],function(t,e,n,r,i){"use strict";var o={},u=e.selectors,c=e.attrs,a=(e.regex,{init:function(t,e,i,a){var s,l,m=$(u.app),p=$(u.page);return m.each(function(u){s=$(this),l=o[s.attr(c.app)],n(s,l,e,i,a,t),!i&&p.length>0&&r(l,p)}),$(u.mask).removeAttr(c.mask),this},pageInit:function(t){return this.init(null,t,!0,!1),this},hashInit:function(t){return this.init(null,t,!1,!0),this}}),s={preinit:function(t){return t.call(this),this},init:function(t,e){require(t,function(){a.init(e)})},app:function(e){var n=o[e]||new t(e,a);return{onInit:function(t){return"function"==typeof t&&t.call(n,n),this},cache:function(){return o[n.name]=n,this},ready:function(){if(o[n.name]===n)return i.initBackButtonHandler(function(){a.hashInit([])}),o[n.name];throw new Error('You did not add this application context to the muv appCache. You must call the ".cache()" method before calling ".ready()"')}}}};return s});