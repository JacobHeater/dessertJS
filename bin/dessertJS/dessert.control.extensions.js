!function(){"use strict";define(["./dessert.control.repeat","./dessert.common","./dessert.ajax","./dessert.databinding","./dessert.viewhelpers"],function(t,e,r,n,i){var a=e.attrs,o=e.utils,c="keyup change click blur focus modelinit";return function(e,s,l){var d=null,u=null;s.providers.IDataBindingProvider&&(u=s.providers.IDataBindingProvider),s.providers.jquery&&(d=s.providers.jquery,r.jquery=d),e.dsrt.bind=function(t){var r=e.attr(a.control),n=t[r];if(t){if(n){if(e.isAny("input:text","textarea","input:password"))e.val(n);else if(e.contains("input:radio")||e.is("input:radio")){var i=e.find("input:radio").addBack(),o=i.filter('[value="'+n+'"]');o.attr("checked",!0)}else if(e.contains("select")||e.is("select")){var s=e.find("option").addBack();Array.isArray(n)?n.forEach(function(t){s.filter('[value="'+t+'"]').attr("selected",!0)}):s.filter('[value="'+n+'"]').attr("selected",!0)}else e.val(n),e.text(n);e.trigger("modelinit")}e.find("input, select, input, textarea").addBack().on(c,function(){var e,n=d(this);if(n.isAny("input:text","textarea","input:password"))e=n.val();else if(n.contains("input:radio")||n.is("input:radio"))e=n.find("input:radio:checked").val()||n.filter(":checked").val();else{if(!n.contains("select")&&!n.is("select"))return n.val()||n.text();e=n.find("option:selected").map(function(t,e){return d(e).val()}).toArray()}t[r]=e})}return this},e.dsrt.watch=function(t){return"function"==typeof t&&e.on(c,function(){t.call(d(this))}),this},e.dsrt.dataBind=function(t){if(t){var r=u.bindTemplateToData(e.html(),t);r=n.cleanupDeferredAttrs(r),e.html(r)}return this},e.dsrt.src=function(t){return{path:t}},e.dsrt.on=function(t,r){return e.on(t,r),this},e.dsrt.jq=e,e.dsrt.load=function(t,n){var i=e.dsrt.view.controller.module.app,a=i.dsrtPath;require([a.concat("dsrt.context.init"),a.concat("dsrt.externalmodules.init")],function(a,o){r.get(t.path).then(function(t){e.children().remove(),e.append(t);var r=o(e,i);r(0,function(){a(e,e.dsrt.view.controller.module.app,{},n)})})})},e.dsrt.outerHtml=function(t){return o.getOuterHtml(t)},e.dsrt.inject=function(t){if("object"==typeof t){var r="component",n="control",a="src",c=!0,d=Object.assign({type:"",name:"",control:null,target:null,callback:null,id:"",url:""},t);switch(d.type.toLowerCase()){case r:i.renderComponent(s,l,e,d.name,d.id,c);break;case n:i.renderControl(s,l,d.control,d.name,d.target||e);break;case a:i.renderExternalModule(s,d.url,d.target||e,callback)}o.isFunction(d.callback)&&d.callback(l)}return this},e.dsrt.repeat=t(e,s)}})}();