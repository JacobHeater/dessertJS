!function(){"use strict";define(["./dessert.control.repeat","./dessert.common","./dessert.ajax","./dessert.databinding","./dessert.viewhelpers"],function(t,e,r,n,i){var a=e.attrs,o=(e.utils,"keyup keydown change click blur focus modelinit");return function(s,c,l){var d=null,u=null;c.providers.IDataBindingProvider&&(u=c.providers.IDataBindingProvider),c.providers.jquery&&(d=c.providers.jquery,r.jquery=d),s.dsrt.bind=function(t){var e=s.attr(a.control),r=t[e];if(t){if(r){if(s.isAny("input:text","textarea","input:password"))s.val(r);else if(s.contains("input:radio")||s.is("input:radio")){var n=s.find("input:radio").addBack(),i=n.filter('[value="'+r+'"]');i.attr("checked",!0)}else if(s.contains("select")||s.is("select")){var c=s.find("option").addBack();Array.isArray(r)?r.forEach(function(t){c.filter('[value="'+t+'"]').attr("selected",!0)}):c.filter('[value="'+r+'"]').attr("selected",!0)}else s.val(r),s.text(r);s.trigger("modelinit")}s.find("input, select, input, textarea").addBack().on(o,function(){var r,n=d(this);if(n.isAny("input:text","textarea","input:password"))r=n.val();else if(n.contains("input:radio")||n.is("input:radio"))r=n.find("input:radio:checked").val()||n.filter(":checked").val();else{if(!n.contains("select")&&!n.is("select"))return n.val()||n.text();r=n.find("option:selected").map(function(t,e){return d(e).val()}).toArray()}t[e]=r})}return this},s.dsrt.watch=function(t){return"function"==typeof t&&s.on(o,function(){t.call(d(this))}),this},s.dsrt.dataBind=function(t){if(t){var e=u.bindTemplateToData(s.html(),t);e=n.cleanupDeferredAttrs(e),s.html(e)}return this},s.dsrt.src=function(t){return{path:t}},s.dsrt.on=function(t,e){return s.on(t,e),this},s.dsrt.jq=s,s.dsrt.load=function(t,e){var n=s.dsrt.view.controller.module.app,i=n.dsrtPath;require([i.concat("dsrt.context.init"),i.concat("dsrt.externalmodules.init")],function(i,a){r.get(t.path).then(function(t){s.children().remove(),s.append(t);var r=a(s,n);r(0,function(){i(s,s.dsrt.view.controller.module.app,{},e)})})})},s.dsrt.outerHtml=function(t){return e.utils.getOuterHtml(t)},s.dsrt.inject=function(t){if("object"==typeof t){var r="component",n="control",a="src",o=!0,d=Object.assign({type:"",name:"",control:null,target:null,callback:null,id:"",url:""},t);switch(d.type.toLowerCase()){case r:i.renderComponent(c,l,s,d.name,d.id,o);break;case n:i.renderControl(c,l,d.control,d.name,d.target||s);break;case a:i.renderExternalModule(c,d.url,d.target||s,callback)}e.utils.isFunction(d.callback)&&d.callback(l)}return this},s.dsrt.repeat=t(s,c)}})}();