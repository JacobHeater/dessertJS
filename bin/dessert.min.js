!function(){"use strict";define("dessert.controller",[],function(){function t(t,e,n,r){this.name=t||"",this.module=e,this.$controller=n,this.onInit=function(){},this.constructor=r||function(){},this.constructor.prototype.scope=function(){},this.constructor.prototype.destroy=function(){},this.constructor.prototype.init=function(){},this.instance=null}return t})}(),function(){"use strict";function t(){function t(t,e,n){Object.defineProperty(t,e,{writable:!1,value:n})}function e(e,n){"object"==typeof n&&Object.keys(n).forEach(function(r){t(e,r,n[r])})}var n={};e(n,{app:"dsrt-app",module:"dsrt-module",controller:"dsrt-controller",view:"dsrt-view",component:"dsrt-component",control:"dsrt-control",controlGroup:"dsrt-control-group",model:"dsrt-model",mask:"dsrt-mask",src:"dsrt-src",rpt:"dsrt-repeat",page:"dsrt-page",id:"id"});var r={};e(r,{app:"[$app]".replace("$app",n.app),module:"[$module]".replace("$module",n.module),controller:"[$controller]".replace("$controller",n.controller),view:"[$view]".replace("$view",n.view),component:"[$component]".replace("$component",n.component),control:"[$control]".replace("$control",n.control),controlGroup:"[$controlGroup]".replace("$controlGroup",n.controlGroup),model:"[$model]".replace("$model",n.model),mask:"[$mask]".replace("$mask",n.mask),src:"[$src]".replace("$src",n.src),rpt:"[$rpt]".replace("$rpt",n.rpt),page:"[$page]".replace("$page",n.page),id:"[$id]".replace("$id",n.id)});var i={},o={};e(o,{src:1,templates:2});var s={};return e(s,{emptyString:"",noop:function(){},getOuterHtml:function(t){var e=t,n=e.wrap("<div />"),r=n.parent().html();return e.unwrap("<div />"),r},cleanPath:function(t){var e=/[a-z]+:\/\//gim,n=/\/\//gim,r=t.split(e),i="",o="";return r.length>1?(i=r[0],o=r[1],o=o.replace(n,"/")):(i=r[0],i=i.replace(n,"/")),i+o},parseQueryString:function(t){var e={};if(t&&t.indexOf("?")>-1){var n=t.split("?"),r=n[1],i=r.split("&");i.forEach(function(t){var n=t.split("="),r=n[0],i=n[1];try{i=JSON.parse(i)}catch(t){i=n[1]}e[r]=i})}return e},cleanQueryString:function(t){return t?t.split("?")[0]:t},getElementAttrs:function(t,e){var n={};if(e=this.isArray(e)?e:[],t){var r=t.get(0);if(r){var i=r.attributes;i.length&&Object.keys(i).forEach(function(t){var r=i[t];"undefined"!=typeof r.nodeValue&&r.nodeName&&e.indexOf(r.nodeName)===-1&&(n[r.nodeName]=r.nodeValue)})}}return n},isObject:function(t){return"object"==typeof t},isFunction:function(t){return"function"==typeof t},isArray:function(t){return Array.isArray(t)},isString:function(t){return"string"==typeof t},addReadOnlyProperty:function(e,n,r){return t(e,n,r),this},addReadOnlyProperties:function(t,n){return e(t,n),this},defer:function(t,e){e=e&&Array.isArray(e)?e:[],this.isFunction(t)&&setTimeout(function(){t.apply(null,e)},0)}}),{attrs:n,selectors:r,regex:i,utils:s,pathTypes:o}}define("dessert.common",[],t)}(),function(){"use strict";define("dessert.module",["dessert.controller","dessert.common"],function(t,e){function n(e,n,i,o){var s={};this.name=e||"",this.controller=function(e,n){return s[e]=new t(e,this,void 0,n),s[e]},this.controllers={get:function(t){return s[t]},remove:function(t){return delete s[t],this},each:function(t){return r.isFunction(t)&&Object.keys(s).forEach(function(e){t.call(s[e],s[e])}),this}},this.$module=i,this.globals=o||{},this.app=n,this.onInit=function(){},this.getPath=function(t,e){return t===n.pathTypes.src?{path:n.src+e+".html"}:t===n.pathTypes.templates?{path:n.templates+e+".html"}:void 0},this.src=function(t){return this.getPath(n.pathTypes.src,t)},this.template=function(t){return this.getPath(n.pathTypes.templates,t)}}var r=e.utils;return n})}(),function(){"use strict";define("dessert.httphandlercache",[],function(){function t(){function t(t,e,n){if(!t||!e||"function"!=typeof n)throw new Error("Invalid HTTP handler! Arguments must be defined as: {String} name, {Number} httpStatusCode, {Function} handler.");this.name=t,this.statusCode=e,this.handler=n}var e=[];this.getHandlersByStatusCode=function(t){return e.filter(function(e){return e.statusCode===t})},this.getHandlersByName=function(t){return e.filter(function(e){return e.name===t})},this.addHandler=function(n,r,i){return e.push(new t(n,r,i)),this},this.removeHandler=function(t){var n=e.filter(function(e){return e.name===t});return n.forEach(function(t){var n=e.indexOf(t);e.splice(n,1)}),this}}return t})}(),function(){"use strict";function t(t,e,n){function r(r,i,s){var c={},u={},a={},d=[];this.name=r||"",this.module=function(e,n){return c[e]=new t(e,this,n),c[e]},this.modules={get:function(t){return c[t]},remove:function(t){return delete c[t],this},each:function(t){return o.isFunction(t)&&Object.keys(c).forEach(function(e){t.call(c[e],c[e])}),this}},this.init=function(t,e){return i.init(this,t,e),this},this.pageInit=function(t){return i.pageInit(this,t),this},this.httpHandlers={page:new n};var f=!1;Object.defineProperty(this,"initialized",{get:function(){return f},set:function(t){"boolean"==typeof t&&(f=t)}}),this.components={register:function(t){return e.utils.isArray(t)&&t.forEach(function(t){u[t.name]=t.entry}),this},get:function(t){return u[t]},each:function(t){var e=this;return o.isFunction(t)&&Object.keys(this.instances).forEach(function(n){t.call(e.instances[n],e.instances[n])}),this},instances:{}},this.registerTags=function(t){e.utils.isArray(t)&&t.forEach(function(t){a[t.name]=t})},this.getCustomTags=function(){var t=[];return Object.keys(a).forEach(function(e){t.push(a[e])}),t},this.trackedElements={add:function(t){return d.push(t),this},destroyAll:function(){d.forEach(function(t){t.off().off("**"),t.children().off().off("**")})}},this.$app=s}var i=e.utils.emptyString,o=e.utils;return r.prototype.pathTypes=e.pathTypes,r.prototype.dsrtPath=i,r.prototype.templates=i,r.prototype.src=i,r.prototype.providers={IDataBindingProvider:null,jquery:null},r}define("dessert.application",["dessert.module","dessert.common","dessert.httphandlercache"],t)}(),function(){"use strict";function t(){return{jquery:null,get:function(t){return this.jquery.ajax({type:"GET",url:t,cache:!0,async:!0})},post:function(t,e){return this.jquery.ajax({type:"POST",url:t,cache:!0,async:!0,data:e,contentType:"application/json; charset=utf-8",dataType:"json"})}}}define("dessert.ajax",t)}(),function(){"use strict";define("dessert.routing",[],function(){function t(t){var e="";return t&&t.length&&t.length>0&&(e+="/:",e+=t.map(function(t){return t.key.concat("=").concat(escape(t.value))}).reduce(function(t,e){return t.concat("&").concat(e)})),e}function e(t){return t.replace(/[#]+/g,"")}function n(t){var e=/(#\/[\w\d\/&=:]+)/gi;return e.test(t)}function r(t){return(t.split("#")[1]||"").indexOf(":")>-1}var i=window.location;return{hasRoute:function(t){var e=t||i.href;return n(e)},setRoute:function(r,o){var s=i.href;o&&(r+=t(o)),n(i.href)&&(s=i.href.split("#")[0]),i.href=e(s).concat("#").concat(r)},getRoute:function(t){var e=t||i.href,n=e.split("#")[1]||"",r=n.split(":")[0]||"",o=/\/$/gim;return r.match(o)&&(r=r.replace(o,"")),r},getParams:function(t){var e=/[a-z]+:\/\//gim,n=t||i.href;e.test(n)&&(n=n.replace(i.protocol.concat("//").concat(i.host).concat("/"),""));var o=[],s="";return r(n)&&(s=n.split(":")[1],o=s.split("&"),o=o.map(function(t){var e=t.split("=");return{key:e[0]||"",value:unescape(e[1]||"")}})),o},onRouteChange:function(t){var e=this;window.addEventListener("hashchange",function(){e.hasRoute()&&t()})}}})}(),define("dessert.customtag",["dessert.common"],function(t){"use strict";function e(e){this.renderAs=t.utils.emptyString,this.renderAsValue=t.utils.emptyString,this.name=t.utils.emptyString,this.tag=t.utils.emptyString,this.replaceWith=t.utils.emptyString,$.extend(this,e)}var n=t.attrs,r={create:function(t,n){return new e(t,n)},types:{externalModule:t.attrs.src,control:t.attrs.control,component:t.attrs.component},init:function(e){var r,i=null;e&&e.providers&&e.providers.jquery&&e.providers.jquery.fn&&(i=e.providers.jquery),e&&e.getCustomTags&&e.getCustomTags().forEach(function(e){r=i(e.tag),r.each(function(){var r,o,s,c=e.replaceWith.trim().length>0?e.replaceWith:"<div></div>",u=["id"];switch(r=i(this),o=i(c),o.attr(e.renderAs,e.renderAsValue),e.renderAs){case n.component:u.length=0;break;case n.src:break;case n.control:o.attr(e.renderAs,r.prop("id"))}s=t.utils.getElementAttrs(r,u),Object.keys(s).forEach(function(t){o.attr(t,s[t])}),r.replaceContent(o)})})}};return r}),function(){"use strict";define("dessert.externalmodules.init",["dessert.common","dessert.ajax","dessert.routing","dessert.customtag"],function(t,e,n,r){return function i(o,s,c){function u(t,c){function u(u){d=y.eq(u),l=g.parseQueryString(d.attr(v.src)),p=g.cleanQueryString(d.attr(v.src)),f=g.cleanPath("$base$modulePath.html".replace("$base",s.src).replace("$modulePath",p)),f&&!/undefined/g.test(f)&&e.get(f).done(function(e){h=a(e),d.is(m.page)?(d.setContent(h),d.removeAttr(v.src)):d.replaceContent(h),r.init(s),y.length&&i(o,s)(t,c)}).fail(function(t){d.is(m.page)&&s.httpHandlers.page.getHandlersByStatusCode(t.status).forEach(function(e){e.handler(t,n)})})}y.length>0?u(0):t(c)}var a=null;s&&s.providers&&s.providers.jquery&&s.providers.jquery.fn&&(a=s.providers.jquery,e.jquery=a);var d,f,l,p,h,m=t.selectors,v=t.attrs,g=t.utils,y=c?o.find(m.page):o.find(m.src);return u}})}(),function(){"use strict";function t(){return function(t,e){e&&e.length&&e.concat&&e.shift&&e.splice&&e.pop&&e.map&&e.map(function(e){t[e]={listeners:[],addListener:function(t){return"function"==typeof t&&this.listeners.push(t),this},removeListener:function(t){var e=this.listeners.indexOf(t);return e>-1&&this.listeners.splice(e,1),this},trigger:function(){for(var t=0,e=this.listeners.length;t<e;t++)this.listeners[t].apply(null,arguments);return this}}})}}define("dessert.events",[],t)}(),function(){"use strict";define("dessert.view",["dessert.events"],function(t){function e(e,n,r){this.name=e||"",this.controller=n,this.$view=r,this.destroy=function(){this.$view.remove(),delete this.controller,delete this.$view},this.configureEvents=function(){return t(this,Array.apply(null,arguments)),this},this.controls={add:function(t){return t&&t.dsrt&&(this[t.dsrt.name]=t),this},get:function(t){return this[t]},remove:function(t){return delete this[t],this}},this.controlGroups={},this.components={}}return e})}(),function(){"use strict";function t(){var t={IDataBindingProvider:e};return t}function e(t){if(this.bindTemplateToData=function(){throw new n("IDataBindingProvider","bindTemplateToData")},"object"!=typeof t)throw new InvalidArgumentError("implementation","object");Object.keys(t).forEach(function(e){this.hasOwnProperty(e)&&(this[e]=t[e])}.bind(this))}function n(t,e){var n='Method "'+e+'" not implemented in interface "'+t+'"!';return Error.call(this),this.message=n,this}define("dessert.interfaces",t),n.prototype=Object.create(Error.prototype),n.prototype.constructor=n}(),function(){"use strict";function t(){function t(t){return n.forEach(function(e){t=t.replace(e.regex,e.repl)}),t}var e={cleanupDeferredAttrs:t},n=[{regex:/deferred-src/gim,repl:"src"}];return e}define("dessert.databinding",t)}(),function(){"use strict";define("dessert.control.repeat",["dessert.interfaces","dessert.ajax","dessert.common","dessert.databinding"],function(t,e,n,r){var i=n.selectors;return function(n,o){var s=null,c=null;return o&&o.providers&&(o.providers.IDataBindingProvider&&o.providers.IDataBindingProvider instanceof t.IDataBindingProvider&&(c=o.providers.IDataBindingProvider),o.providers.jquery&&o.providers.jquery.fn&&(s=o.providers.jquery,e.jquery=s)),function(t,o,u){var a,d,f,l,p,h,m=[],v=s.extend({clear:!0},u),g=function(t){var e=t.map(function(t){return s("<div />").append(s(t).clone()).html()}).join("");v.clear===!0&&n.children().remove(),e=r.cleanupDeferredAttrs(e),n.append(l?l.append(e):e)};return t&&t.length&&(a=function(e){for(var n=0;n<t.length;n++)e(t[n])},d=c.bindTemplateToData,"string"==typeof o?(f=o,l="",p=s(f),1===p.find(i.rpt).length&&(f=p.find(i.rpt).eq(0).html(),p.find(i.rpt).remove(),l=p),a(function(t){h=d(f,t),m.push(h)}),g(m)):"object"==typeof o&&e.get(o.path).then(function(t){f=t,l="",p=s(f),1===p.find(i.rpt).length&&(f=p.find(i.rpt).eq(0).html(),p.find(i.rpt).remove(),l=p),a(function(t){h=d(f,t),m.push(h)}),g(m)})),this}}})}(),function(){"use strict";define("dessert.control.extensions",["dessert.control.repeat","dessert.common","dessert.ajax","dessert.interfaces","dessert.databinding"],function(t,e,n,r,i){var o=e.attrs;return function(s,c){var u=null,a=null;c&&c.providers&&c.providers.IDataBindingProvider&&c.providers.IDataBindingProvider instanceof r.IDataBindingProvider&&(a=c.providers.IDataBindingProvider),c&&c.providers&&(c.providers.IDataBindingProvider&&c.providers.IDataBindingProvider instanceof r.IDataBindingProvider&&(a=c.providers.IDataBindingProvider),c.providers.jquery&&c.providers.jquery.fn&&(u=c.providers.jquery,n.jquery=u)),s.dsrt.bind=function(t){return t&&(s.val(t[s.attr(o.control)]),s.on("keyup keydown change",function(){t[u(this).attr(o.control)]=u(this).val()||u(this).text()})),this},s.dsrt.watch=function(t){return"function"==typeof t&&s.on("keyup keydown change",function(){t.call(u(this))}),this},s.dsrt.dataBind=function(t){if(t){var e=a.bindTemplateToData(s.html(),t);e=i.cleanupDeferredAttrs(e),s.html(e)}return this},s.dsrt.src=function(t){return{path:t}},s.dsrt.on=function(t,e){return s.on(t,e),this},s.dsrt.jq=s,s.dsrt.load=function(t,e){var r=s.dsrt.view.controller.module.app,i=r.dsrtPath;require([i.concat("dsrt.context.init"),i.concat("dsrt.externalmodules.init")],function(i,o){n.get(t.path).then(function(t){s.children().remove(),s.append(t);var n=o(s,r);n(0,function(){i(s,s.dsrt.view.controller.module.app,{},e)})})})},s.dsrt.outerHtml=function(t){return e.utils.getOuterHtml(t)},s.dsrt.repeat=t(s,c)}})}(),function(){"use strict";function t(t){function e(e,n,r,i){return n.dsrt=n.dsrt||{},n.dsrt.name=e,n.dsrt.view=r,n.destroy=function(){n.remove()},t(n,i),n}return e}define("dessert.control",["dessert.control.extensions"],t)}(),function(){"use strict";define("dessert.model",[],function(){function t(t){"object"==typeof t&&Object.keys(t).forEach(function(e){this[e]=t[e]}.bind(this))}return t})}(),function(){"use strict";define("dessert.component",["dessert.common"],function(t){function e(){}function n(t){return t.prototype=Object.create(this.prototype),t.prototype.constructor=t,t.extend=n.bind(t),t}return e.prototype.constructor=t.utils.noop,e.prototype.constructor.prototype.destroy=t.utils.noop,e.prototype.constructorInstances=[],e.prototype.render=t.utils.noop,e.prototype.instance=null,e.extend=n.bind(e),e})}(),function(){"use strict";function t(t){function e(){var e=t.utils.noop;this.resolve=function(t){return e=t,this},this.notify=function(n,r){return r=Array.isArray(r)?r:[],t.utils.isFunction(e)&&e.apply(n,r),this}}return e}var e=["dessert.common"];define("dessert.asyncresource",e,t)}(),define("dessert.asyncresource",function(){}),function(){"use strict";function t(t,e,n,r,i,o){var s=t.selectors,c=t.attrs;return function(i,u,a,d,f,l,p,h){function m(t,e,n){var r;t&&n&&t.render(function(i){n.replaceContent(i),r=new t.constructor(i),Array.isArray(t.constructorInstances)&&t.constructorInstances.push(r),I.components[e].notify(r,[r])})}var v=null;f&&f.providers&&f.providers.jquery&&f.providers.jquery.fn&&(v=f.providers.jquery);var g;g=i?i.find(s.view):d.find(s.view);var y,j,w,b,$,q,I,P,E,k,x,A,O,T;g.each(function(){if(y=v(this),f.trackedElements.add(y),w=y.find(s.control),j=y.find(s.component),I=new e(y.attr(c.view),u,y),P={},E=y.find(s.model),b=y.find(s.controlGroup),j.each(function(){var e,n,r,i;e=v(this),f.trackedElements.add(e),n=e.attr(c.component),i=f.components.get(n),r=e.prop(c.id),I.components[r]=new o,i&&(t.utils.isString(i)?f.components.instances[i]?t.utils.defer(function(){var t=f.components.instances[i];m(t,r,e)}):require([i],function(t){if(t){var n=new t;f.components.instances[i]=n,m(n,r,e)}}):t.utils.isFunction(i)&&t.utils.defer(function(){var t;f.components.instances[i.toString()]?t=f.components.instances[i.toString()]:(t=new i,f.components.instances[i.toString()]=t),m(t,r,e)}))}),E.each(function(){k=v(this),f.trackedElements.add(k),P[k.attr(c.control)]=t.utils.emptyString}),w.each(function(){x=v(this),f.trackedElements.add(x),A=x.attr(c.control),O=new n(A,x,I,f),I.controls.add(O)}),b.each(function(){q=v(this),f.trackedElements.add(q),$=q.attr(c.controlGroup),I.controlGroups[$]||(I.controlGroups[$]=[]),I.controlGroups[$].push(q)}),T=new r(P),u){u.instance||u.instance instanceof u.constructor||(u.instance=new u.constructor);var i={view:I,model:T,module:a,page:p};u.instance.scope(i),u.instance.init()}})}}define("dessert.view.init",["dessert.common","dessert.view","dessert.control","dessert.model","dessert.component","dessert.asyncresource"],t)}(),function(){"use strict";define("dessert.controller.init",["dessert.common","dessert.view.init"],function(t,e){var n=t.selectors,r=t.attrs;return function(t,i,o,s,c,u){var a=null;o&&o.providers&&o.providers.jquery&&o.providers.jquery.fn&&(a=o.providers.jquery);var d,f,l=t.find(n.controller);l.length>0?l.each(function(){d=a(this),u||(f=i.controllers.get(d.attr(r.controller)),f&&(f.$controller=d,a.isFunction(f.onInit)&&f.onInit(),e(d,f,i,t,o,s,c,u)))}):e(d,f,i,t,o,s,c,u)}})}(),function(){"use strict";define("dessert.page",["dessert.routing"],function(t){function e(e,n,r){this.app=e,this.route=function(e,n){t.setRoute(e,n)},this.$page=n,this.args=r||[]}return e})}(),function(){"use strict";define("dessert.module.init",["dessert.controller.init","dessert.common","dessert.page","dessert.routing"],function(t,e,n,r){var i=e.selectors,o=e.attrs;return function(e,s,c,u){var a=null;s&&s.providers&&s.providers.jquery&&s.providers.jquery.fn&&(a=s.providers.jquery);var d,f,l,p,h,m,v;f=e.find(i.module),0===f.length&&(m=e.find(i.view),m.each(function(){v=a(this),v.wrap("<div />").parent().attr(o.module,v.attr(o.view).concat("$partial"))}),f=e.find(i.module)),l=e.find(i.page).eq(0),l&&l.length>0&&(d=new n(s,l,c),r.hasRoute()||r.setRoute(l.attr(o.page),c)),f.each(function(){p=a(this),h=s.modules.get(p.attr(o.module)),h&&(h.$module=p,a.isFunction(h.onInit)&&h.onInit(),t(p,h,s,c,d,u))}),"function"==typeof u&&u(s,e,c)}})}(),function(){"use strict";function t(t){return function(e,n,r,i,o){t(e,n,r,i,o)}}define("dessert.context.init",["dessert.module.init"],t)}(),function(){"use strict";define("dessert.syncmodules.init",["dessert.context.init","dessert.customtag"],function(t,e){return function(n,r,i){return function(o){e.init(r),t(n,r,i,o)}}})}(),function(){"use strict";define("dessert.init",["dessert.externalmodules.init","dessert.syncmodules.init","dessert.common"],function(t,e,n){return function(r,i,o,s,c,u){var a;i.initialized?a=s?r.find(n.selectors.page).parent():r:(a=r,i.initialized=!0);var d=t(a,i,s),f=e(a,i,o);c?d(function(){},u):d(f,u)}})}(),function(){"use strict";define("dessert.singlepage.init",["dessert.routing","dessert.common"],function(t,e){var n=e.attrs;return function(e,r){var i=t.getRoute(),o=t.getParams();if(i&&o)r.attr(n.src,i),e.pageInit(o);else if(r.attr(n.page)){var i=r.attr(n.page);t.hasRoute(i)||(i="#".concat(i)),i=t.getRoute(i);var o=t.getParams(i);r.attr(n.src,i),e.pageInit(o)}}})}(),function(){"use strict";function t(){return function(t){return t.fn.setContent=function(t){return this.html("").append(t)},t.fn.replaceContent=function(t){return this.replaceWith(t)},t}}define("dessert.jquery.extend",t)}(),function(){"use strict";define("dessert.core",["dessert.application","dessert.common","dessert.init","dessert.singlepage.init","dessert.routing","dessert.customtag","dessert.jquery.extend"],function(t,e,n,r,i,o,s){function c(t){t.modules.each(function(){this.controllers.each(function(){this.instance&&f.isFunction(this.instance.destroy)&&this.instance.destroy(),this.instance=null})}),t.components.each(function(){e.utils.isArray(this.constructorInstances)&&(this.constructorInstances.forEach(function(t){t&&f.isFunction(t.destroy)&&(t.destroy(),t=null)}),this.constructorInstances.length=0)})}var u={},a=e.selectors,d=e.attrs,f=e.utils,l={init:function(t,e,i,c,u){var f=null;t&&t.providers&&t.providers.jquery&&t.providers.jquery.fn&&(f=t.providers.jquery);var l=f("["+d.app+"="+t.name+"]"),p=l.find(a.page);return s(f),o.init(t),!c&&p.length>0?r(t,p):n(l,t,i,c,u,e),f(a.mask).removeAttr(d.mask),this},pageInit:function(t,e){return this.init(t,null,e,!0,!1),this},hashInit:function(t,e){return this.init(t,null,e,!1,!0),this}},p={preinit:function(t){return t.call(this),this},init:function(t,e){require(t,function(){l.init(e)})},app:function n(r,o){var n;return u[r]?n=u[r]:(n=new t(r,l),u[r]=n),i.onRouteChange(function(){c(n),l.hashInit(n,[])}),e.utils.isFunction(o)&&o.call(n,n),n}};return p})}();