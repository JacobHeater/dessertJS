!function(){"use strict";define(["./dessert.control.repeat","./dessert.common","./dessert.ajax","./dessert.databinding","./dessert.viewhelpers","./dessert.context.init","./dessert.externalmodules.init"],function(t,e,n,r,i,a,o){var c=e.attrs,l=e.utils,s="modelinit ",d="blur focus click keyup",u="click blur change";return function(e,f,p){var v=null,h=null;f.providers.IDataBindingProvider&&(h=f.providers.IDataBindingProvider),f.providers.jquery&&(v=f.providers.jquery,n.jquery=v),e.dsrt.bind=function(t){function n(){var e,n=v(this);if(n.is("input, textarea")&&!n.is("input:radio, input:checkbox"))e=n.val();else if(n.contains("input:radio")||n.is("input:radio"))e=n.find("input:radio:checked").val()||n.filter(":checked").val();else if(n.contains("input:checkbox")||n.is("input:checkbox"))e=n.find("input:checkbox:checked").val()||n.filter(":checked").val();else{if(!n.contains("select")&&!n.is("select"))return n.val()||n.text();e=n.find("option:selected").map(function(t,e){return v(e).val()}).toArray()}t[r]=e}var r=e.attr(c.control),i=t[r];if(t){if(i){if(e.is("input, textarea")&&!e.is("input:radio, input:checkbox"))e.val(i);else if(e.contains("input:radio")||e.is("input:radio")){var a=e.find("input:radio").andSelf(),o=a.filter('[value="'+i+'"]');o.attr("checked",!0)}else if(e.contains("select")||e.is("select")){var l=e.find("option").andSelf();Array.isArray(i)?i.forEach(function(t){l.filter('[value="'+t+'"]').attr("selected",!0)}):l.filter('[value="'+i+'"]').attr("selected",!0)}else e.val(i),e.text(i);e.trigger("modelinit")}var s=e.find("input, textarea, select").andSelf();s.filter(":not(input:radio, input:checkbox)").on(d,n),s.filter("input:radio, input:checkbox, select").on(u,n)}return this},e.dsrt.watch=function(t){return"function"==typeof t&&e.on(s+u+d,t),this},e.dsrt.dataBind=function(t){if(t){var n=h.bindTemplateToData(e.html(),t);n=r.cleanupDeferredAttrs(n),e.html(n)}return this},e.dsrt.src=function(t){return{path:t}},e.dsrt.on=function(t,n){return e.on(t,n),this},e.dsrt.jq=e,e.dsrt.load=function(t,r){n.get(t.path).then(function(t){e.children().remove(),e.append(t);var n=o(e,f);n(0,function(){a(e,e.dsrt.view.controller.module.app,{},r)})})},e.dsrt.outerHtml=function(t){return l.getOuterHtml(t)},e.dsrt.inject=function(t){if("object"==typeof t&&t){var n="component",r="control",a="src",o=!0,c=Object.assign({type:"",name:"",control:null,target:null,callback:null,id:"",url:""},t);switch(c.type.toLowerCase()){case n:i.renderComponent(f,p,e,c.name,c.id,o);break;case r:i.renderControl(f,p,c.control,c.name,c.target||e);break;case a:i.renderExternalModule(f,c.url,c.target||e,callback)}l.isFunction(c.callback)&&c.callback(p)}return this},e.dsrt.repeat=t(e,f)}})}();