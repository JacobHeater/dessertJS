!function(){"use strict";define(["./dessert.common"],function(t){function n(t){var n="";return t&&t.length&&t.length>0&&(n+="/:",n+=t.map(function(t){return t.key.concat("=").concat(escape(t.value))}).reduce(function(t,n){return t.concat("&").concat(n)})),n}function e(t){return t.replace(/[#]+/g,"")}function r(t){var n=/(#\/[\w\d\/&=:]+)/gi;return n.test(t)}function o(t){return(t.split("#")[1]||"").indexOf(":")>-1}var c=window.location,a={hasRoute:function(t){var n=t||c.href;return r(n)},setRoute:function(t,o){var a=c.href;t===this.CURRENT&&(t=this.getRoute()),o&&(t+=n(o)),r(c.href)&&(a=c.href.split("#")[0]),c.href=e(a).concat("#").concat(t)},getRoute:function(t){var n=t||c.href,e=n.split("#")[1]||"",r=e.split(":")[0]||"",o=/\/$/gim;return r.match(o)&&(r=r.replace(o,"")),r},getParams:function(t){var n=/[a-z]+:\/\//gim,e=t||c.href;n.test(e)&&(e=e.replace(c.protocol.concat("//").concat(c.host).concat("/"),""));var r=[],a="";return o(e)&&(a=e.split(":")[1],r=a.split("&"),r=r.map(function(t){var n=t.split("=");return{key:n[0]||"",value:unescape(n[1]||"")}})),r},onRouteChange:function(t){var n=this;window.addEventListener("hashchange",function(){n.hasRoute()?t():window.location.href=document.referrer.trim()||window.location.href})}};return t.utils.addReadOnlyProperty(a,"CURRENT","CURRENT"),a})}();